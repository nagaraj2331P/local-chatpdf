<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Local ChatPDF</title>
<link rel="icon" href="/static/favicon.ico">


<style>
/* ---------------- BASE ---------------- */
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    background: radial-gradient(circle at top, #1a1a1a, #7e035e);
    font-family: Arial, sans-serif;
    overflow-x: hidden;
}

/* ---------------- HEADER ---------------- */
.head {
    font-size: 50px;
    font-weight: bold;
    text-align: center;
    color: white;
    animation: glow 1s ease-in-out infinite alternate;
}

@keyframes glow {
    from {
        text-shadow: 0 0 5px #00ff26, 0 0 10px #00f2ff, 0 0 15px #e60073;
    }
    to {
        text-shadow: 0 0 10px #fff, 0 0 25px #ff4da6;
    }
}

.logo {
    position: relative;
    top: 10px;
    left: 50px;
    width: 180px;
    height: 90px;
}

/* ---------------- IMAGE GRID ---------------- */
.carousel-container {
  width: 100%;
  overflow: hidden;
  margin: 30px auto;
}

.carousel-track {
  display: flex;
  width: max-content;
  animation: scroll 18s linear infinite;
}

.carousel-track img {
  width: 260px;
  height: 160px;
  margin: 0 15px;
  border-radius: 14px;
  object-fit: cover;
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  box-shadow: 0 0 12px rgba(255,255,255,0.3);
  cursor: pointer;
}

/* Hover zoom */
.carousel-track img:hover {
  transform: scale(1.15);
  box-shadow: 0 0 25px rgba(255,255,255,0.8);
}

/* Pause animation on hover */
.carousel-container:hover .carousel-track {
  animation-play-state: paused;
}

/* Keyframes for movement */
@keyframes scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

/* ---------------- INPUTS ---------------- */
.center {
    text-align: center;
    margin-top: 20px;
}

textarea {
    width: 70%;
    padding: 10px;
    font-size: 16px;
    background: rgb(255, 255, 255);
}

button {
    padding: 5px 10px;
    font-size: 16px;
    cursor: pointer;
}
choose-file {
    font-size: 16px;
    padding: 5px 10px;
}
/* ---------------- ANSWER ---------------- */
#answer {
    width: 70%;
    margin: 20px auto;
    padding: 15px;
    background: rgb(255, 255, 255);
    border-radius: 8px;
    white-space: pre-wrap;
}

/* ---------------- STARS ---------------- */
.star-field {
    position: fixed;
    inset: 0;
    pointer-events: none;
}

.star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 2s infinite ease-in-out;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}
</style>
</head>

<body>
<img src="/static/img1.webp" class="logo">
<div class="star-field"></div>
<div class="head">
     Local ChatPDF <br>
    <span style="font-size:22px;">Know your PDFs locally</span>
</div>
<div class="carousel-container">
  <div class="carousel-track">
    <img src="/static/img2.jpg">
    <img src="/static/img3.png">
    <img src="/static/img4.jpg">
    <img src="/static/img5.jpg">

    <!-- duplicate for smooth loop -->
    <img src="/static/img2.jpg">
    <img src="/static/img3.png">
    <img src="/static/img4.jpg">
    <img src="/static/img5.jpg">
  </div>
</div>


<div class="center">
    <input type="file" id="pdfFile" title="Select a PDF file to upload">
    <button onclick="uploadPDF()">Upload PDF</button>
</div>

<div class="center">
    <textarea id="question" rows="3" placeholder="Ask something about the PDF..."></textarea>
    <br><br>
    <button onclick="askQuestion()">Ask</button>
</div>

<div id="answer"></div>

<footer style="text-align:center;color:white;margin-top:40px;">
    Made with ❤️ NAGARAJ KCE
</footer>

<!-- ---------------- JAVASCRIPT ---------------- -->
<script>
async function uploadPDF() {
    const fileInput = document.getElementById("pdfFile");
    if (fileInput.files.length === 0) {
        alert("Please select a PDF file");
        return;
    }

    const formData = new FormData();
    formData.append("file", fileInput.files[0]);

    const res = await fetch("/upload", {
        method: "POST",
        body: formData
    });

    const data = await res.json();
    alert(data.status || data.message);
}

async function askQuestion() {
    const question = document.getElementById("question").value;
    if (!question.trim()) {
        alert("Please enter a question");
        return;
    }

    document.getElementById("answer").innerText = "Thinking...";

    const formData = new FormData();
    formData.append("question", question);

    const res = await fetch("/ask", {
        method: "POST",
        body: formData
    });

    const data = await res.json();

    alert("Response received from backend");  // DEBUG
    const answerBox = document.getElementById("answer");
    answerBox.innerText = data.answer;
}

/* STAR BACKGROUND */
window.onload = function () {
    const starField = document.querySelector(".star-field");
    for (let i = 0; i < 120; i++) {
        const star = document.createElement("div");
        star.className = "star";
        star.style.top = Math.random() * 100 + "%";
        star.style.left = Math.random() * 100 + "%";
        star.style.animationDuration = (Math.random() * 3 + 1) + "s";
        starField.appendChild(star);
    }
};

/* CAROUSEL PAUSE ON HOVER */
const track = document.querySelector(".carousel-track");

track.addEventListener("mouseenter", () => {
  track.style.animationPlayState = "paused";
});

track.addEventListener("mouseleave", () => {
  track.style.animationPlayState = "running";
});

</script>

</body>
</html>
